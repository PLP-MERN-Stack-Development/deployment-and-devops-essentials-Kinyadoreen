{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\New folder\\\\week7\\\\deployment-and-devops-essentials-Kinyadoreen\\\\frontend\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\n// src/pages/Dashboard.js\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport TaskForm from '../components/TaskForm';\nimport TaskList from '../components/TaskList';\nimport axios from 'axios';\nimport './Dashboard.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useContext(AuthContext);\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showForm, setShowForm] = useState(false);\n  const [editingTask, setEditingTask] = useState(null);\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n  const fetchTasks = async () => {\n    try {\n      const res = await axios.get('http://localhost:5000/api/tasks');\n      setTasks(res.data.data || []);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to fetch tasks');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleAddTask = () => {\n    setEditingTask(null);\n    setShowForm(true);\n  };\n  const handleEditTask = task => {\n    setEditingTask(task);\n    setShowForm(true);\n  };\n  const handleDeleteTask = async id => {\n    if (!window.confirm('Are you sure you want to delete this task?')) return;\n    try {\n      await axios.delete(`http://localhost:5000/api/tasks/${id}`);\n      setTasks(tasks.filter(t => t._id !== id));\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to delete task');\n    }\n  };\n  const handleSaveTask = async taskData => {\n    try {\n      if (editingTask) {\n        const res = await axios.put(`http://localhost:5000/api/tasks/${editingTask._id}`, taskData);\n        setTasks(tasks.map(t => t._id === editingTask._id ? res.data.data : t));\n      } else {\n        const res = await axios.post('http://localhost:5000/api/tasks', taskData);\n        setTasks([res.data.data, ...tasks]);\n      }\n      setShowForm(false);\n      setEditingTask(null);\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || 'Failed to save task');\n    }\n  };\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingTask(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"dashboard-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddTask,\n          children: \"+ Add Task\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          className: \"logout-btn\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading tasks...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), showForm && /*#__PURE__*/_jsxDEV(TaskForm, {\n        task: editingTask,\n        onSave: handleSaveTask,\n        onClose: handleCloseForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(TaskList, {\n        tasks: tasks,\n        onEdit: handleEditTask,\n        onDelete: handleDeleteTask\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), tasks.length === 0 && !showForm && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No tasks yet. Create your first task!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 47\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"Mn68HM/4bkaC7mvrdtke8fSE/cU=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","TaskForm","TaskList","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","user","logout","tasks","setTasks","loading","setLoading","error","setError","showForm","setShowForm","editingTask","setEditingTask","fetchTasks","res","get","data","err","_err$response","_err$response$data","response","message","handleAddTask","handleEditTask","task","handleDeleteTask","id","window","confirm","delete","filter","t","_id","_err$response2","_err$response2$data","handleSaveTask","taskData","put","map","post","_err$response3","_err$response3$data","handleCloseForm","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSave","onClose","onEdit","onDelete","length","_c","$RefreshReg$"],"sources":["C:/Users/ADMIN/Desktop/New folder/week7/deployment-and-devops-essentials-Kinyadoreen/frontend/src/pages/Dashboard.js"],"sourcesContent":["// src/pages/Dashboard.js\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport TaskForm from '../components/TaskForm';\r\nimport TaskList from '../components/TaskList';\r\nimport axios from 'axios';\r\nimport './Dashboard.css';\r\n\r\nconst Dashboard = () => {\r\n  const { user, logout } = useContext(AuthContext);\r\n  const [tasks, setTasks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingTask, setEditingTask] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchTasks();\r\n  }, []);\r\n\r\n  const fetchTasks = async () => {\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/api/tasks');\r\n      setTasks(res.data.data || []);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Failed to fetch tasks');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddTask = () => {\r\n    setEditingTask(null);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleEditTask = (task) => {\r\n    setEditingTask(task);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleDeleteTask = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this task?')) return;\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/tasks/${id}`);\r\n      setTasks(tasks.filter(t => t._id !== id));\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Failed to delete task');\r\n    }\r\n  };\r\n\r\n  const handleSaveTask = async (taskData) => {\r\n    try {\r\n      if (editingTask) {\r\n        const res = await axios.put(`http://localhost:5000/api/tasks/${editingTask._id}`, taskData);\r\n        setTasks(tasks.map(t => t._id === editingTask._id ? res.data.data : t));\r\n      } else {\r\n        const res = await axios.post('http://localhost:5000/api/tasks', taskData);\r\n        setTasks([res.data.data, ...tasks]);\r\n      }\r\n      setShowForm(false);\r\n      setEditingTask(null);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Failed to save task');\r\n    }\r\n  };\r\n\r\n  const handleCloseForm = () => {\r\n    setShowForm(false);\r\n    setEditingTask(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <header className=\"dashboard-header\">\r\n        <h1>Welcome, {user?.name}</h1>\r\n        <div>\r\n          <button onClick={handleAddTask}>+ Add Task</button>\r\n          <button onClick={logout} className=\"logout-btn\">Logout</button>\r\n        </div>\r\n      </header>\r\n\r\n      {loading ? (\r\n        <p>Loading tasks...</p>\r\n      ) : (\r\n        <>\r\n          {error && <p className=\"error\">{error}</p>}\r\n\r\n          {showForm && (\r\n            <TaskForm\r\n              task={editingTask}\r\n              onSave={handleSaveTask}\r\n              onClose={handleCloseForm}\r\n            />\r\n          )}\r\n\r\n          <TaskList\r\n            tasks={tasks}\r\n            onEdit={handleEditTask}\r\n            onDelete={handleDeleteTask}\r\n          />\r\n\r\n          {tasks.length === 0 && !showForm && <p>No tasks yet. Create your first task!</p>}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}